exec cue export -e out --out yaml ./apps/...
cmp stdout golden.yaml

-- apps/monitoring.cue --
package app

out: (#App & {config: {
	name: "monitoring"
	common: namespace: "monitoring"

	// Custom objects using the object field
	object: namespaced: {
		ServiceMonitor: "prometheus-sm": {
			apiVersion: "monitoring.coreos.com/v1"
			spec: {
				selector: matchLabels: {
					"app.kubernetes.io/name": "monitoring"
				}
				endpoints: [{
					port: "http"
					path: "/metrics"
				}]
			}
		}
	}
}}).out

-- golden.yaml --
- apiVersion: monitoring.coreos.com/v1
  kind: ServiceMonitor
  metadata:
    labels:
      app.kubernetes.io/name: monitoring
    name: prometheus-sm
    namespace: monitoring
  spec:
    selector:
      matchLabels:
        app.kubernetes.io/name: monitoring
    endpoints:
      - port: http
        path: /metrics
